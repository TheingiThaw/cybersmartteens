<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
    <link href="css/styles.css" rel="stylesheet">
    <link href="css/mobileres.css" rel="stylesheet">
</head>
<body>
  <?php
      include 'dbconfig.php';
      $id = "";
      $name = "";
      $email = "";
      $oldpassword = "";
      $userPassword = ""; 

      if(isset($_GET['id'])){
        $id = $_GET["id"];
        $sql = "SELECT * FROM user WHERE id = $id";
        $result = $conn->query($sql);
        $row = $result->fetch_assoc();
        $name = $row["username"];
        $email = $row["email"];
        $userPassword = $row["userpassword"];
      }
      if(isset($_POST['id'])){
        $id = $_POST["id"];
        $name = $_POST["updateName"];
        $email = $_POST["updateEmail"];
        $oldpassword = $_POST["oldpassword"];
        $userPassword = $_POST["updatePassword"];
        $sql = "UPDATE user SET username='$name', email = '$email', userpassword = '$userPassword'
                WHERE id = '$id';";
        if($conn->query($sql)===TRUE)
        {
          header('location:/cybersmarteens/index.php/');
          exit();
        }
        else{
          echo "Error updating record" . $conn->error;
        }
        $conn->close();
      }
      ?>
    <main class="mb-fullwidth">
        <div class="productdetails-main auto">
          <section class="row">
            <section class="col-3 pd-nav-ls">
                <nav class="nav flex-column">
                    <a class="nav-link nav-a active" aria-current="page" href="#edit-profile">Edit Profile</a>
                    <a class="nav-link nav-a" href="#">Notificatiom</a>
                    <a class="nav-link nav-a" href="#">Choose Plan</a>
                    <a class="nav-link nav-a" href="#">Password & Security</a>
                    <a class="nav-link nav-a" href="">Get Help <i class="bi bi-info-circle-fill"></i></a>
                    <a class="nav-link nav-a" href="">Sign Out</a>
                </nav>
            </section>
            <section class="col-7" id="edit-profile">
                <h1 class="mobile-font3">Edit Profile</h1>
                <div class="center mt-5">
                    <img src="photos/casual-life-3d-young-man-in-headset-using-computer.png" class="pd-edit-img" alt="">
                </div>
                <div class="mb-3">
                    <input type="file" value="">
                </div>
                <form class="row g-3 mt-3" action="profiledetails.php" method="post">
                    <div class="col-md-5">
                      <label for="validationServer01" class="form-label">First Name</label>
                      <input type="text" class="form-control" name="updatename" id="updateName" value="<?php echo $username; ?>" required>
                      <div class="valid-feedback">

                      </div>
                    </div>
                    <div class="col-md-5">
                      <label for="validationServer01" class="form-label">Sur Name</label>
                      <input type="text" class="form-control" name="updatename" id="updateName" value="<?php echo $username; ?>" required>
                      <div class="valid-feedback">

                      </div>
                    </div>
                    <div class="col-md-10">
                      <label for="validationServerUsername" class="form-label">Email</label>
                      <div class="input-group has-validation">
                        <input type="text" class="form-control" name="updateEmail" id="updateEmail" value="<?php echo $email; ?>" aria-describedby="inputGroupPrepend3 validationServerUsernameFeedback" required>
                      </div>
                    </div>
                    <div class="col-md-10">
                        <label for="validationServer03" class="form-label">Old Password</label>
                        <input type="text" class="form-control" name="oldpassword" id="oldpassword" value="<?php echo $userPassword; ?>" aria-describedby="validationServer03Feedback" required>
                        <div id="validationServer03Feedback" class="invalid-feedback">
                          
                        </div>
                    </div>
                    <div class="col-md-10">
                        <label for="validationServer03" class="form-label">New Password</label>
                        <input type="text" class="form-control" name="updatePassword" id="updatePassword" aria-describedby="validationServer03Feedback" required>
                        <div id="validationServer03Feedback" class="invalid-feedback">
                          
                        </div>
                    </div>
                    <div class="col-md-10">
                      <label for="validationServer04" class="form-label">Password Confirmation</label>
                      <input type="text" class="form-control" id="validationServer03" aria-describedby="validationServer03Feedback" required>
                      <div id="validationServer04Feedback" class="invalid-feedback">
                              
                      </div>
                    </div>
                    <div class="col-12">
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="invalidCheck3" aria-describedby="invalidCheck3Feedback" required>
                        <label class="form-check-label" for="invalidCheck3">
                          Agree to terms and conditions
                        </label>
                        <div id="invalidCheck3Feedback" class="invalid-feedback">
                          
                        </div>
                      </div>
                    </div>
                    <div class="col-12">
                      <button class="btn pd-join-anchor pink-anchor" type="submit">Save</button>
                    </div>

                    <script type="text/javascript" language="javascript">
                      $document.ready(function(){
                        
                      });
                    </script>
                </form>
            </section>
          </section>

          <section class="pd-join center">
            <div>
                <h1 class="text-center font-45 mobile-font4">
                    Step Up
                </h1>
                <p class="text-center mt-5">
                    Don't be a wallflower, be a firework! Enrol in our memberships for 
                    special features. Start streaming your reality, your way, your rules.
                </p>
                <a href="" class="btn pd-join-anchor center pink-anchor">Join Now</a>
            </div>
          </section>

          <section class="pd-connectivity auto center">
            <div>
                <h1 class="font-45 mobile-font4">
                    Connectivity
                </h1>
                <p class="mt-4">
                    Since we know you've got places to be, we've carefully curated 
                    this list to keep you connected!
                </p>
                <h5 class="mt-4 mobile-font1">Sites</h5>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item mt-2"><a href="https://www.facebook.com/" class="nav-a">Facebook</a></li>
                    <li class="list-group-item mt-2"><a href="https://www.twitter.com/" class="nav-a">Twitter X</a></li>
                    <li class="list-group-item mt-2"><a href="https://www.instagram.com/" class="nav-a">Instagram</a></li>
                    <li class="list-group-item mt-2"><a href="https://www.youtube.com/" class="nav-a">Youtube</a></li>
                </ul>
            </div>
          </section>
        </div>
    </main>
</body>
</html>